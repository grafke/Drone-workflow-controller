{
    "jobs": [
        {
            "id": "test_emr_job",
            "type": "emr",
            "start_time": "2015-10-23T00:00:00",
            "delay_minutes": "",
            "interval_minutes": "1440",
            "retry": "0",
            "dependencies":
              [
                {
                  "job_completed":
                    {
                      "id": "test_remote_action",
                      "last_schedule_time_interval_minutes": "1440"
                    }
                }
              ],
            "LogUri": "s3://lamoda-data/logs/",
            "AmiVersion": "3.10.0",
            "Instances": {
                "InstanceGroups": [
                    {
                        "Name": "Master Node",
                        "Market": "ON_DEMAND",
                        "InstanceRole": "MASTER",
                        "InstanceType": "m1.xlarge",
                        "InstanceCount": 1
                    },
                    {
                        "Name": "Code Node",
                        "Market": "ON_DEMAND",
                        "InstanceRole": "CORE",
                        "InstanceType": "m1.xlarge",
                        "InstanceCount": 1
                    }
                ],
                "Ec2KeyName": "paulius_key",
                "Placement": {
                    "AvailabilityZone": "eu-west-1a"
                },
                "HadoopVersion": "2.4.0"
            },
            "Steps": [
                {
                    "Name": "Setup Hive",
                    "ActionOnFailure": "TERMINATE_JOB_FLOW",
                    "HadoopJarStep": {
                        "Jar": "s3://eu-west-1.elasticmapreduce/libs/script-runner/script-runner.jar",
                        "Args": [
                            "s3://eu-west-1.elasticmapreduce/libs/hive/hive-script",
                            "--base-path",
                            "s3://us-east-1.elasticmapreduce/libs/hive/",
                            "--install-hive",
                            "--hive-versions",
                            "0.13.1"
                        ]
                    }
                },
                {
                    "Name": "Run Hive Step",
                    "ActionOnFailure": "TERMINATE_JOB_FLOW",
                    "HadoopJarStep": {
                        "Jar": "s3://eu-west-1.elasticmapreduce/libs/script-runner/script-runner.jar",
                        "Args": [
                            "s3://eu-west-1.elasticmapreduce/libs/hive/hive-script",
                            "--base-path",
                            "s3://eu-west-1.elasticmapreduce/libs/hive/",
                            "--hive-versions",
                            "0.13.1",
                            "--run-hive-script",
                            "--args",
                            "-f",
                            "s3://lamoda-data/tmp/test_hive_script.sql"
                        ]
                    }
                },
                {
                    "Name": "Run Hive Step",
                    "ActionOnFailure": "TERMINATE_JOB_FLOW",
                    "HadoopJarStep": {
                        "Jar": "s3://eu-west-1.elasticmapreduce/libs/script-runner/script-runner.jar",
                        "Args": [
                            "s3://eu-west-1.elasticmapreduce/libs/hive/hive-script",
                            "--base-path",
                            "s3://eu-west-1.elasticmapreduce/libs/hive/",
                            "--hive-versions",
                            "0.13.1",
                            "--run-hive-script",
                            "--args",
                            "-f",
                            "s3://lamoda-data/tmp/test_hive_script_w_args.sql",
                            "-d",
                            "BASE_DATA=lamoda-data"
                        ]
                    }
                }
            ],
            "NewSupportedProducts": [
                {
                    "Name": "ganglia"
                },
                {
                    "Name": "spark",
                    "Args": ["1.3.1"]
                },
                {
                    "Name": "hive",
                    "Args": ["0.13.1"]
                }
            ],
            "VisibleToAllUsers": "True"
        }
    ]
}
